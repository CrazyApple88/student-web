/*! plug-1.0.0.js 2018-02-03 10:11:30 */

function Layer(i){this.config={layerBoxClass:"layerBox",layerclass:"",width:300,height:200,zIndex:1e3,alerttit:"信息",setOverflow:"overflow-y:auto",callback:function(){}},$.extend(this.config,i)}Layer.prototype={_createDialog:function(i){var e=this,t="",s=e.config.width,o=e.config.height,n=UDP.Public.view();if(e.config.zIndex++,"string"==typeof e.config.width){if(s.indexOf("%")&&o.indexOf("%")){var a=n.w*(parseInt(this.config.width)/100),c=n.h*(parseInt(this.config.height)/100);t='<div class="overlay" style="z-index:'+e.config.zIndex+'"><div class="animated zoomIn '+e.config.layerBoxClass+'" style = "width:'+this.config.width+";height:"+this.config.height+'"><div class="layerHeader">'+this.config.alerttit+'<a href="javascript:;" class="close_btn"></a></div><div class="layerContianer '+this.config.layerclass+'" style="'+this.config.setOverflow+'"></div><span class="layer-size"></span></div></div>',$("body").append(t),$("."+e.config.layerBoxClass).eq($(".overlay").size()-1).css({left:(n.w-a)/2+"px",top:(n.h-c)/2+"px"})}}else t='<div class="overlay" style="z-index:'+e.config.zIndex+'"><div class="animated zoomIn '+e.config.layerBoxClass+'" style = "width:'+this.config.width+"px;height:"+this.config.height+'px"><div class="layerHeader">'+this.config.alerttit+'<a href="javascript:;" class="close_btn"></a></div><div class="layerContianer '+this.config.layerclass+'" style="'+this.config.setOverflow+'"></div><span class="layer-size"></span></div></div>',$("body").append(t),$("."+e.config.layerBoxClass).eq($(".overlay").size()-1).css({left:(n.w-this.config.width)/2+"px",top:(n.h-this.config.height)/2+"px"});return $(".close_btn").click(function(){e.delDialog($(this))}),e.config.callback&&e.config.callback.apply(this,[]),t},delDialog:function(i){$(i).parents(".overlay").remove()},moveDialog:function(i){var e=this,t=UDP.Public.view();$(".layerHeader").mousedown(function(i){var s=$(this).parents("."+e.config.layerBoxClass);i.stopPropagation(),i.preventDefault();var o=i.clientX-s.offset().left,n=i.clientY-s.offset().top;$(document).mousemove(function(i){var e=i.clientX-o,a=i.clientY-n;e=(e=e<0?0:e)>t.w-s.width()?t.w-s.width():e,a=(a=a<0?0:a)>t.h-s.height()?t.h-s.height():a,s.css({left:e+"px",top:a+"px"})}),$(document).mouseup(function(){$(this).unbind("mousemove")})})},revampSize:function(){var i=this,e=UDP.Public.view();$(".layer-size").mousedown(function(t){var s=$(this).parents("."+i.config.layerBoxClass),o=t.clientX-s.width(),n=t.clientY-s.height();$(document).mousemove(function(i){var t=i.clientX-o+"px",a=i.clientY-n+"px";t=(t=t<0?0:t)>e.w?e.w:t,a=(a=a<0?0:a)>e.h?e.h:a,s.css({width:t,height:a})}),$(document).mouseup(function(){$(document).unbind("mousemove")})})},show:function(){this._createDialog(),this.moveDialog(),this.revampSize()}},function(i){i.UDP?i.UDP.Layer=Layer:i.UDP={Layer:Layer}}(window);